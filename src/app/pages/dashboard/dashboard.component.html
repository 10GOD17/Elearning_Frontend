<div class="dashboard">

  <!-- Page Header -->
  <div class="page-header">
    <div class="header-left">
      <div class="header-greeting">Buenos d칤as,</div>
      <h1 class="header-name">{{ userName() || 'Usuario' }} <span class="wave">游녦</span></h1>
      <p class="header-sub">Bienvenido/a al Sistema de Gesti칩n de Aprendizaje de SalfaCorp</p>
    </div>
    <div class="header-right">
      <div class="date-badge">
        <i class="pi pi-calendar"></i>
        <span>Febrero 2025</span>
      </div>
      <div class="role-tag">{{ authService.getRoleLabel() }}</div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    @for (stat of stats; track stat.label) {
      <div class="stat-card" [style.--accent-color]="stat.color" [style.--accent-bg]="stat.bg">
        <div class="stat-icon-wrap">
          <i [class]="stat.icon"></i>
        </div>
        <div class="stat-content">
          <div class="stat-value">{{ stat.value }}</div>
          <div class="stat-label">{{ stat.label }}</div>
          <div class="stat-change">{{ stat.change }}</div>
        </div>
      </div>
    }
  </div>

  <!-- Main Grid -->
  <div class="main-grid">

    <!-- Courses Widget -->
    <div class="widget">
      <div class="widget-header">
        <h3 class="widget-title">
          <i class="pi pi-book"></i>
          Mis Cursos Recientes
        </h3>
        <a class="widget-link">Ver todos</a>
      </div>
      <div class="widget-body">
        @for (course of courses; track course.title) {
          <div class="course-item">
            <div class="course-header">
              <div>
                <div class="course-title">{{ course.title }}</div>
                <div class="course-category">{{ course.category }}</div>
              </div>
              <p-tag [severity]="getStatusSeverity(course.status)" [value]="course.status" [rounded]="true"></p-tag>
            </div>
            <div class="course-progress">
              <div class="progress-info">
                <span>Progreso</span>
                <span class="progress-pct">{{ course.progress }}%</span>
              </div>
              <div class="progress-bar-wrap">
                <div class="progress-bar-fill" [style.width.%]="course.progress" [style.background]="course.color"></div>
              </div>
            </div>
          </div>
        }
      </div>
    </div>

    <!-- Chart Widget -->
    <div class="widget">
      <div class="widget-header">
        <h3 class="widget-title">
          <i class="pi pi-chart-line"></i>
          Actividad de Aprendizaje
        </h3>
        <span class="widget-subtitle">칔ltimos 6 meses</span>
      </div>
      <div class="widget-body chart-body">
        <p-chart type="line" [data]="chartData" [options]="chartOptions" height="200"></p-chart>
      </div>
    </div>

  </div>

  <!-- Quick Actions -->
  @if (role() === 'capital_humano' || role() === 'jefatura') {
    <div class="widget quick-actions-widget">
      <div class="widget-header">
        <h3 class="widget-title">
          <i class="pi pi-bolt"></i>
          Acciones R치pidas
        </h3>
      </div>
      <div class="actions-grid">
        @if (role() === 'capital_humano') {
          <button class="action-btn">
            <div class="action-icon" style="background:#FFF1F1; color:#9D2226">
              <i class="pi pi-plus-circle"></i>
            </div>
            <span>Nuevo Curso</span>
          </button>
          <button class="action-btn">
            <div class="action-icon" style="background:#EFF6FF; color:#4F7CAC">
              <i class="pi pi-user-plus"></i>
            </div>
            <span>Asignar Formaci칩n</span>
          </button>
          <button class="action-btn">
            <div class="action-icon" style="background:#F0FDF4; color:#22c55e">
              <i class="pi pi-file-pdf"></i>
            </div>
            <span>Exportar Reporte</span>
          </button>
          <button class="action-btn">
            <div class="action-icon" style="background:#F5F3FF; color:#7C3AED">
              <i class="pi pi-cog"></i>
            </div>
            <span>Configuraci칩n</span>
          </button>
        }
        @if (role() === 'jefatura') {
          <button class="action-btn">
            <div class="action-icon" style="background:#EFF6FF; color:#4F7CAC">
              <i class="pi pi-users"></i>
            </div>
            <span>Ver Equipo</span>
          </button>
          <button class="action-btn">
            <div class="action-icon" style="background:#FFFBEB; color:#f59e0b">
              <i class="pi pi-chart-bar"></i>
            </div>
            <span>Ver DNC</span>
          </button>
          <button class="action-btn">
            <div class="action-icon" style="background:#F0FDF4; color:#22c55e">
              <i class="pi pi-send"></i>
            </div>
            <span>Enviar Recordatorio</span>
          </button>
        }
      </div>
    </div>
  }

</div>
